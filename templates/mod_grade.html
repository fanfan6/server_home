{% extends "base.html" %}

{%load staticfiles%}


{% block content %}
    <div class="row">
        <div class="col-md-12">
            <section class="panel">
                <header class="panel-heading" style="background-color: #4cae4c; color: #fff7e1">
                    <h4>模型评分情况</h4>
                </header>
            </section>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-12">
            <div class="panel-group" id="accordion">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                                评分状况 表格 （点击隐藏）
                            </a>
                        </h4>
                    </div>
                    <div id="collapseOne" class="panel-collapse collapse">
                        <div class="panel-body">
                            <section class="panel">
                                <header class="panel-heading tab-bg-dark-navy-blue tab-right ">
                                    <ul class="nav nav-tabs pull-right">
                                        <li class="active">
                                            <a data-toggle="tab" href="#scorehour">
                                                时
                                            </a>
                                        </li>
                                        <li class="">
                                            <a data-toggle="tab" href="#scoreday">
                                                日
                                            </a>
                                        </li>
                                        <li class="">
                                            <a data-toggle="tab" href="#scoreweek">
                                                周
                                            </a>
                                        </li>
                                        <li class="">
                                            <a data-toggle="tab" href="#scoremonth">
                                                月
                                            </a>
                                        </li>
                                    </ul>
                                </header>
                                <div class="panel-body">
                                    <div class="tab-content">
                                        <div id="scorehour" class="tab-pane active">
                                            <table class="table table-bordered">
                                                <tr>
                                                    <td rowspan="2">时间</td>
                                                    {% for each in mod_h %}
                                                    <td colspan="8" style="text-align: center">{{ each }}</td>
                                                    {% endfor %}
                                                </tr>
                                                <tr>
                                                    {% for each in mod_h %}
                                                    <td>AVG</td>
                                                    <td>MIN</td>
                                                    <td>P5</td>
                                                    <td>P25</td>
                                                    <td>P50</td>
                                                    <td>P75</td>
                                                    <td>P95</td>
                                                    <td>MAX</td>
                                                    {% endfor %}
                                                </tr>
                                            {% for each in response_hour %}
                                                <tr>
                                                    <td>{{ each.0 }}</td>
                                                    {% for j in each.2 %}
                                                    <td>{{ j.0 | default_if_none:"0" }}</td>
                                                    <td>{{ j.1 | default_if_none:"0"  }}</td>
                                                    <td>{{ j.2 | default_if_none:"0"  }}</td>
                                                    <td>{{ j.3 }}</td>
                                                    <td>{{ j.4 }}</td>
                                                    <td>{{ j.5 }}</td>
                                                    <td>{{ j.6 }}</td>
                                                    <td>{{ j.7 }}</td>
                                                    {% endfor %}
                                                </tr>
                                            {% endfor %}
                                            </table>
                                        </div>
                                        <div id="scoreday" class="tab-pane">
                                            <table class="table table-bordered">
                                                <tr>
                                                    <td rowspan="2">时间</td>
                                                    {% for each in mod_d %}
                                                    <td colspan="8" style="text-align: center">{{ each }}</td>
                                                    {% endfor %}
                                                </tr>
                                                <tr>
                                                    {% for each in mod_d %}
                                                    <td>AVG</td>
                                                    <td>MIN</td>
                                                    <td>P5</td>
                                                    <td>P25</td>
                                                    <td>P50</td>
                                                    <td>P75</td>
                                                    <td>P95</td>
                                                    <td>MAX</td>
                                                    {% endfor %}
                                                </tr>
                                            {% for each in response_day %}
                                                <tr>
                                                    <td>{{ each.0 }}</td>
                                                    {% for j in each.2 %}
                                                    <td>{{ j.0 | default_if_none:"0" }}</td>
                                                    <td>{{ j.1 | default_if_none:"0"  }}</td>
                                                    <td>{{ j.2 | default_if_none:"0"  }}</td>
                                                    <td>{{ j.3 }}</td>
                                                    <td>{{ j.4 }}</td>
                                                    <td>{{ j.5 }}</td>
                                                    <td>{{ j.6 }}</td>
                                                    <td>{{ j.7 }}</td>
                                                    {% endfor %}
                                                </tr>
                                            {% endfor %}
                                            </table>
                                        </div>
                                        <div id="scoreweek" class="tab-pane">
                                            <table class="table table-bordered">
                                                <tr>
                                                    <td rowspan="2">时间</td>
                                                    {% for each in mod_w %}
                                                    <td colspan="8" style="text-align: center">{{ each }}</td>
                                                    {% endfor %}
                                                </tr>
                                                <tr>
                                                    {% for each in mod_w %}
                                                    <td>AVG</td>
                                                    <td>MIN</td>
                                                    <td>P5</td>
                                                    <td>P25</td>
                                                    <td>P50</td>
                                                    <td>P75</td>
                                                    <td>P95</td>
                                                    <td>MAX</td>
                                                    {% endfor %}
                                                </tr>
                                            {% for each in response_week %}
                                                <tr>
                                                    <td>{{ each.0 }}</td>
                                                    {% for j in each.2 %}
                                                    <td>{{ j.0 | default_if_none:"0" }}</td>
                                                    <td>{{ j.1 | default_if_none:"0"  }}</td>
                                                    <td>{{ j.2 | default_if_none:"0"  }}</td>
                                                    <td>{{ j.3 }}</td>
                                                    <td>{{ j.4 }}</td>
                                                    <td>{{ j.5 }}</td>
                                                    <td>{{ j.6 }}</td>
                                                    <td>{{ j.7 }}</td>
                                                    {% endfor %}
                                                </tr>
                                            {% endfor %}
                                            </table>
                                        </div>
                                        <div id="scoremonth" class="tab-pane">
                                            <table class="table table-bordered">
                                                <tr>
                                                    <td rowspan="2">时间</td>
                                                    {% for each in mod_m %}
                                                    <td colspan="8" style="text-align: center">{{ each }}</td>
                                                    {% endfor %}
                                                </tr>
                                                <tr>
                                                    {% for each in mod_m %}
                                                    <td>AVG</td>
                                                    <td>MIN</td>
                                                    <td>P5</td>
                                                    <td>P25</td>
                                                    <td>P50</td>
                                                    <td>P75</td>
                                                    <td>P95</td>
                                                    <td>MAX</td>
                                                    {% endfor %}
                                                </tr>
                                            {% for each in response_mon %}
                                                <tr>
                                                    <td>{{ each.0 }}</td>
                                                    {% for j in each.2 %}
                                                    <td>{{ j.0 | default_if_none:"0" }}</td>
                                                    <td>{{ j.1 | default_if_none:"0"  }}</td>
                                                    <td>{{ j.2 | default_if_none:"0"  }}</td>
                                                    <td>{{ j.3 }}</td>
                                                    <td>{{ j.4 }}</td>
                                                    <td>{{ j.5 }}</td>
                                                    <td>{{ j.6 }}</td>
                                                    <td>{{ j.7 }}</td>
                                                    {% endfor %}
                                                </tr>
                                            {% endfor %}
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
                                通过量 图表 （点击隐藏）
                            </a>
                        </h4>
                    </div>
                    <div id="collapseTwo" class="panel-collapse collapse in">
                        <div class="panel-body">
                            <section class="panel">
                                <header class="panel-heading tab-bg-dark-navy-blue tab-right ">
                                    <ul class="nav nav-tabs pull-right">
                                        <li class="">
                                            <a data-toggle="tab" class="reload" href="#pichour">
                                                时
                                            </a>
                                        </li>
                                        <li class="active">
                                            <a data-toggle="tab" class="reload" href="#picday">
                                                日
                                            </a>
                                        </li>
                                        <li class="">
                                            <a data-toggle="tab" class="reload" href="#picweek">
                                                周
                                            </a>
                                        </li>
                                        <li class="">
                                            <a data-toggle="tab" class="reload" href="#picmonth">
                                                月
                                            </a>
                                        </li>
                                    </ul>
                                </header>
                                <div class="panel-body">
                                    <div class="tab-content">
                                        <div id="pichour" class="tab-pane">
                                            <div id="mainh" style="width: auto;height:400px;"></div>
                                                <script src="/static/js/echarts.min.js"></script>
                                                <script src="/static/js/macarons.js"></script>
                                                <script type="text/javascript">
                                                    var myCharth = echarts.init(document.getElementById('mainh'), 'macarons');
                                                    optionh = {
                                                        tooltip: {
                                                            trigger: 'axis',
                                                            axisPointer: {
                                                                type: 'cross',
                                                                crossStyle: {
                                                                    color: '#999'
                                                                }
                                                            }
                                                        },
                                                        toolbox: {
                                                            feature: {
                                                                dataView: {show: true, readOnly: false},
                                                                magicType: {show: true, type: ['line', 'bar']},
                                                                restore: {show: true},
                                                                saveAsImage: {show: true}
                                                            }
                                                        },
                                                        legend: {
                                                            data:['申请量','通过量','通过率']
                                                        },
                                                        xAxis: [
                                                            {
                                                                type: 'category',
                                                                data: [
                                                                    {% for eachh in res_hour %}
                                                                        '{{ eachh.0 }}',
                                                                    {% endfor %}
                                                                ],
                                                                axisPointer: {
                                                                    type: 'shadow'
                                                                }
                                                            }
                                                        ],
                                                        yAxis: [
                                                            {
                                                                type: 'value',
                                                                name: '人次',
                                                                axisLabel: {
                                                                    formatter: '{value}'
                                                                }
                                                            },
                                                            {
                                                                type: 'value',
                                                                name: '通过率',
                                                                min: 0,
                                                                max: 1,
                                                                axisLabel: {
                                                                    formatter: '{value}'
                                                                }
                                                            }
                                                        ],
                                                        series: [
                                                            {
                                                                name:'申请量',
                                                                type:'bar',
                                                                data:[
                                                                    {% for eachh in res_hour %}
                                                                        '{{ eachh.1 }}',
                                                                    {% endfor %}
                                                                ]
                                                            },
                                                            {
                                                                name:'通过量',
                                                                type:'bar',
                                                                data:[
                                                                    {% for eachh in res_hour %}
                                                                        '{{ eachh.2 }}',
                                                                    {% endfor %}
                                                                ]
                                                            },
                                                            {
                                                                name:'通过率',
                                                                type:'line',
                                                                yAxisIndex: 1,
                                                                data:[
                                                                    {% for eachh in res_hour %}
                                                                        '{{ eachh.3 }}',
                                                                    {% endfor %}
                                                                ]
                                                            }
                                                        ]
                                                    };
                                                    myCharth.setOption(optionh);
                                                </script>
                                        </div>
                                        <div id="picday" class="tab-pane active">
                                            <div id="maind" style="width: auto;height:400px;"></div>
                                                <script src="/static/js/echarts.min.js"></script>
                                                <script src="/static/js/macarons.js"></script>
                                                <script type="text/javascript">
                                                    var myChartd = echarts.init(document.getElementById('maind'), 'macarons');
                                                    optiond = {
                                                        tooltip: {
                                                            trigger: 'axis',
                                                            axisPointer: {
                                                                type: 'cross',
                                                                crossStyle: {
                                                                    color: '#999'
                                                                }
                                                            }
                                                        },
                                                        toolbox: {
                                                            feature: {
                                                                dataView: {show: true, readOnly: false},
                                                                magicType: {show: true, type: ['line', 'bar']},
                                                                restore: {show: true},
                                                                saveAsImage: {show: true}
                                                            }
                                                        },
                                                        legend: {
                                                            data:['信用分低于阈值','欺诈分高于阈值','年龄不符合要求']
                                                        },
                                                        xAxis: [
                                                            {
                                                                type: 'category',
                                                                data: [
                                                                    {% for eachh in res_day2 %}
                                                                        '{{ eachh.2 }}',
                                                                    {% endfor %}
                                                                ],
                                                                axisPointer: {
                                                                    type: 'shadow'
                                                                }
                                                            }
                                                        ],
                                                        yAxis: [
                                                            {
                                                                type: 'value',
                                                                name: '命中量',
                                                                axisLabel: {
                                                                    formatter: '{value}'
                                                                }
                                                            },
                                                            {
                                                                type: 'value',
                                                                name: '命中率',
                                                                min: 0,
                                                                max: 0.3,
                                                                axisLabel: {
                                                                    formatter: '{value}'
                                                                }
                                                            }
                                                        ],
                                                        series: [
                                                            {
                                                                name:'信用分低于阈值',
                                                                type:'bar',
                                                                data:[
                                                                    {% for each in res_day2 %}
                                                                        '{{ each.0.0 }}',
                                                                    {% endfor %}
                                                                ]
                                                            },
                                                            {
                                                                name:'信用分低于阈值',
                                                                type:'line',
                                                                yAxisIndex: 1,
                                                                data:[
                                                                    {% for each in res_day2 %}
                                                                        '{{ each.1.0 }}',
                                                                    {% endfor %}
                                                                ]
                                                            },
                                                            {
                                                                name:'欺诈分高于阈值',
                                                                type:'bar',
                                                                data:[
                                                                    {% for each in res_day2 %}
                                                                        '{{ each.0.1 }}',
                                                                    {% endfor %}
                                                                ]
                                                            },
                                                            {
                                                                name:'欺诈分高于阈值',
                                                                type:'line',
                                                                yAxisIndex: 1,
                                                                data:[
                                                                    {% for each in res_day2 %}
                                                                        '{{ each.1.1 }}',
                                                                    {% endfor %}
                                                                ]
                                                            },
                                                            {
                                                                name:'年龄不符合要求',
                                                                type:'bar',
                                                                data:[
                                                                    {% for each in res_day2 %}
                                                                        '{{ each.0.2 }}',
                                                                    {% endfor %}
                                                                ]
                                                            },
                                                            {
                                                                name:'年龄不符合要求',
                                                                type:'line',
                                                                yAxisIndex: 1,
                                                                data:[
                                                                    {% for each in res_day2 %}
                                                                        '{{ each.1.2 }}',
                                                                    {% endfor %}
                                                                ]
                                                            }
                                                        ]
                                                    };
                                                    myChartd.setOption(optiond);
                                                </script>
                                        </div>
                                        <div id="picweek" class="tab-pane">
                                            <div id="mainh" style="width: auto;height:400px;"></div>
                                                <script src="/static/js/echarts.min.js"></script>
                                                <script src="/static/js/macarons.js"></script>
                                                <script type="text/javascript">
                                                    var myCharth = echarts.init(document.getElementById('mainh'), 'macarons');
                                                    optionh = {
                                                        tooltip: {
                                                            trigger: 'axis',
                                                            axisPointer: {
                                                                type: 'cross',
                                                                crossStyle: {
                                                                    color: '#999'
                                                                }
                                                            }
                                                        },
                                                        toolbox: {
                                                            feature: {
                                                                dataView: {show: true, readOnly: false},
                                                                magicType: {show: true, type: ['line', 'bar']},
                                                                restore: {show: true},
                                                                saveAsImage: {show: true}
                                                            }
                                                        },
                                                        legend: {
                                                            data:['申请量','通过量','通过率']
                                                        },
                                                        xAxis: [
                                                            {
                                                                type: 'category',
                                                                data: [
                                                                    {% for eachh in res_hour %}
                                                                        '{{ eachh.0 }}',
                                                                    {% endfor %}
                                                                ],
                                                                axisPointer: {
                                                                    type: 'shadow'
                                                                }
                                                            }
                                                        ],
                                                        yAxis: [
                                                            {
                                                                type: 'value',
                                                                name: '人次',
                                                                axisLabel: {
                                                                    formatter: '{value}'
                                                                }
                                                            },
                                                            {
                                                                type: 'value',
                                                                name: '通过率',
                                                                min: 0,
                                                                max: 1,
                                                                axisLabel: {
                                                                    formatter: '{value}'
                                                                }
                                                            }
                                                        ],
                                                        series: [
                                                            {
                                                                name:'申请量',
                                                                type:'bar',
                                                                data:[
                                                                    {% for eachh in res_hour %}
                                                                        '{{ eachh.1 }}',
                                                                    {% endfor %}
                                                                ]
                                                            },
                                                            {
                                                                name:'通过量',
                                                                type:'bar',
                                                                data:[
                                                                    {% for eachh in res_hour %}
                                                                        '{{ eachh.2 }}',
                                                                    {% endfor %}
                                                                ]
                                                            },
                                                            {
                                                                name:'通过率',
                                                                type:'line',
                                                                yAxisIndex: 1,
                                                                data:[
                                                                    {% for eachh in res_hour %}
                                                                        '{{ eachh.3 }}',
                                                                    {% endfor %}
                                                                ]
                                                            }
                                                        ]
                                                    };
                                                    myCharth.setOption(optionh);
                                                </script>
                                        </div>
                                        <div id="picmonth" class="tab-pane">
                                            <div id="mainh" style="width: auto;height:400px;"></div>
                                                <script src="/static/js/echarts.min.js"></script>
                                                <script src="/static/js/macarons.js"></script>
                                                <script type="text/javascript">
                                                    var myCharth = echarts.init(document.getElementById('mainh'), 'macarons');
                                                    optionh = {
                                                        tooltip: {
                                                            trigger: 'axis',
                                                            axisPointer: {
                                                                type: 'cross',
                                                                crossStyle: {
                                                                    color: '#999'
                                                                }
                                                            }
                                                        },
                                                        toolbox: {
                                                            feature: {
                                                                dataView: {show: true, readOnly: false},
                                                                magicType: {show: true, type: ['line', 'bar']},
                                                                restore: {show: true},
                                                                saveAsImage: {show: true}
                                                            }
                                                        },
                                                        legend: {
                                                            data:['申请量','通过量','通过率']
                                                        },
                                                        xAxis: [
                                                            {
                                                                type: 'category',
                                                                data: [
                                                                    {% for eachh in res_hour %}
                                                                        '{{ eachh.0 }}',
                                                                    {% endfor %}
                                                                ],
                                                                axisPointer: {
                                                                    type: 'shadow'
                                                                }
                                                            }
                                                        ],
                                                        yAxis: [
                                                            {
                                                                type: 'value',
                                                                name: '人次',
                                                                axisLabel: {
                                                                    formatter: '{value}'
                                                                }
                                                            },
                                                            {
                                                                type: 'value',
                                                                name: '通过率',
                                                                min: 0,
                                                                max: 1,
                                                                axisLabel: {
                                                                    formatter: '{value}'
                                                                }
                                                            }
                                                        ],
                                                        series: [
                                                            {
                                                                name:'申请量',
                                                                type:'bar',
                                                                data:[
                                                                    {% for eachh in res_hour %}
                                                                        '{{ eachh.1 }}',
                                                                    {% endfor %}
                                                                ]
                                                            },
                                                            {
                                                                name:'通过量',
                                                                type:'bar',
                                                                data:[
                                                                    {% for eachh in res_hour %}
                                                                        '{{ eachh.2 }}',
                                                                    {% endfor %}
                                                                ]
                                                            },
                                                            {
                                                                name:'通过率',
                                                                type:'line',
                                                                yAxisIndex: 1,
                                                                data:[
                                                                    {% for eachh in res_hour %}
                                                                        '{{ eachh.3 }}',
                                                                    {% endfor %}
                                                                ]
                                                            }
                                                        ]
                                                    };
                                                    myCharth.setOption(optionh);
                                                </script>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}